<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Bootstrap Registration Form Template</title>

        <!-- CSS -->
        <!-- <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,100,300,500"> -->
        <link rel="stylesheet" href="./studentRegister/assets/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="./studentRegister/assets/font-awesome/css/font-awesome.min.css">
		    <link rel="stylesheet" href="./studentRegister/assets/css/form-elements.css">
        <link rel="stylesheet" href="./studentRegister/assets/css/style.css">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <!-- Favicon and touch icons -->
        <link rel="shortcut icon" href="./studentRegister/assets/ico/favicon.png">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./studentRegister/assets/ico/apple-touch-icon-144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./studentRegister/assets/ico/apple-touch-icon-114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./studentRegister/assets/ico/apple-touch-icon-72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="./studentRegister/assets/ico/apple-touch-icon-57-precomposed.png">
		<link rel="stylesheet" href="css/amazeui.min.css" />
		<link rel="stylesheet" href="css/app.css" />
    </head>
	<style>
		.mainbody{
			background-size: 100% auto;

			background-image: url("imgs/login_back.png");
			background-repeat: no-repeat;
		}

	</style>
 <script type="text/javascript" src="./studentRegister/assets/js/jquery.min.js" ></script>
	<!--<script type="text/javascript" src="js/jquery.min.js" ></script>-->
  <script>
   
 	 function isnull_id(val) {

      var str = val.replace(/(^\s*)|(\s*$)/g, '');//去除空格;

      if (str == '' || str == undefined || str == null) 
      {
          //return true;
          console.log('学号不能为空')
          return false;
      } 
      else {
          //return false;
          var length = str.length;
    		if(length == 9 && /^((([0-9]{1})|)+\d{9})$/.test(val) ) 
    		{ 
        		  console.log('可以提交');
   				  return true;
    		}
			else
			{
        		  console.log('格式不正确');
                  return false;
   			}
        
      	}
  	}
 	 function isnull_pn(val) {

      var str = val.replace(/(^\s*)|(\s*$)/g, '');//去除空格;

      if (str == '' || str == undefined || str == null) 
      {
          //return true;
          console.log('电话号不能为空')
          return false;
      } 
      else {
          //return false;
          var length = str.length;
    		if(length == 11 && /^((([0-9]{1})|)+\d{9})$/.test(val) ) 
    		{ 
        		  console.log('可以提交');
   				  return true;
    		}
			else
			{
        		  console.log('格式不正确');
                  return false;
   			}
        
      	}
  	}
  	function isnull(val) {

     var str = val.replace(/(^\s*)|(\s*$)/g, '');//去除空格;
      if (str == '' || str == undefined || str == null) 
      {
          //return true;
          console.log('不能为空')
             return false;
      } 
      else {
          
        	console.log('可以提交');
            return true;
    		
  			}
     }
  	function jianchaminma(val1,val2) {

//    var str = val.replace(/(^\s*)|(\s*$)/g, '');//去除空格;
console.log("mima");
      if (val1!=val2) 
      {
          //return true;
          console.log('密码不同');
             return false;
      } 
      else {
        	console.log('密码相同');
            return true;
  			}
     }




    //回调函数
    function getName(data){
    	console.log("get");
        console.log(data.state);
        
		console.log(JSON.stringify(data));
        alert("sucess " + JSON.stringify(data));
        if(data.state=="1")
        {
        	console.log("成功！");
        	window.location.href='./index.html';
        }
       
         if(data.state=="0")
        {
        	console.log("失败");
        	
        }
    }

    $(document).ready(function () {

        $("#btn").click(function () {

      var oid = $('#stuI').val();
			var opw1 = $('#password').val();
			var opw2 = $('#password_again').val();
			var name = $('#name').val();
			var phoneNum = $('#phoneNum').val();
			var field = $('#field').val();
			var gender = $('#gender').val();
			var oclass = $('#class').val();
			var campus = $('#campus').val();
			var gender = $('#gender').val();

		console.log("gender " + gender);
  			var oBtn = document.getElementById('Btn');
		console.log('3');
		




    		// if(isnull_id(oid)
    		// 	&&isnull( opw1)
    		// 	&&isnull(name)
    		// 	&&isnull(field)
    		// 	&&isnull_pn(phoneNum)
    		// 	&&isnull(gender)
    		// 	&&isnull(oclass)
    		// 	&&isnull(campus)
    		// 	&&jianchaminma(opw1,opw2))
    		{
    			console.log("go！");
    			console.log(oid);
    		//<!--stuId,name,gender,phoneNum,field,class,password,campus-->
    		
            //向头部输入一个脚本，该脚本发起一个跨域请求
            $.ajax({
                type: "GET",

                url: "http://127.0.0.1:3000/studentRegister",
                data: {
                  callbackFun:"getName",
                stuId:oid,
                password:opw2,
                name:name,
                gender:gender,
                phoneNum:phoneNum,
                field:field,
                class:oclass,
                campus:campus,
                },
                dataType:"jsonp"  //数据格式设置为jsonp
                
                //jsonp:"callback"
            });
            console.log("gogo！");
           }
        });

    });
    </script>
    <body >

		<!-- Top menu -->
		<header data-am-widget="header" class="am-topbar am-topbar-inverse am-topbar-fixed-top">
			<a href="studentLogin.html" style="float: left">
				<img src="imgs/返回 .png" height="20" width="20" style="height:100%;margin-bottom: -20px;margin-left: 15px"/>
			</a>
			<div style="text-align: center;align-content: center;line-height: 40px;"></div>

		</header>

        <!-- Top content -->
        <div class="top-content mainbody" >
        	
            <div class="inner-bg" style="padding: 20px 0 100px 0;margin-top: 40px">
                <div class="container">
                    <div class="row">
                        
                        <div class="col-sm-5 form-box">
                        	<div class="form-top" style="padding：0 25px 5px 25px">
                        		<div class="form-top-left" style="padding-top: 15px;">
                        			<h3>注册</h3>
                        		</div>
                        		<!--stuId,name,gender,phoneNum,field,class,password,campus-->
                            </div>
                            <div class="form-bottom">
			                    <form role="form"  class="registration-form">
			                    	<div class="form-group">
			                        	<label class="sr-only" for="form-last-name">name</label>
			                        	<input type="text" id="name" name="name" placeholder="请输入名字" class="form-last-name form-control" >
			                        </div>
			                         <div class="form-group">
			                        	
			                        	<div class="col-sm-3">
			                        		<label>
			                        			<input type="radio" value="男" name="campus" placeholder="radio" class="col-sm-2 form-email form-control" style="width:70px; float:left" id="gender">男</input>
			                       			</label>
			                       			<label>
			                        			<input type="radio" value="女" name="campus" placeholder="radio" class="col-sm-2 form-email form-control" style="width:70px; float:left;margin-left: 40px" id="gender">女</input>
			                        		</label>
			                        	</div>
			                     		</div>
			                    	<div class="form-group">
			                    		<label class="sr-only" for="form-first-name">stuId</label>
			                        	<input type="text" id="stuI" name="stuId" placeholder="请输入学号" class="form-first-name form-control" >
			                        </div>
			                        <div class="form-group">
			                        	<label class="sr-only" for="form-email">phoneNum</label>
			                        	<input type="text" name="phoneNum" placeholder="请输入电话号码" class="form-email form-control" id="phoneNum">
			                        </div>
			                         <div class="form-group">
			                        	<label class="sr-only" for="form-email">campus</label>
			                        	<input type="text" name="campus" placeholder="请输入学院" class="form-email form-control" id="campus">
			                        </div>
			                        <div class="form-group">
			                        	<label class="sr-only" for="form-email">field</label>
			                        	<input type="text" name="field" placeholder="请输入专业" class="form-email form-control" id="field">
			                        </div>
			                        <div class="form-group">
			                        	<label class="sr-only" for="form-email">class</label>
			                        	<input type="text" name="class" placeholder="请输入班级" class="form-email form-control" id="class">
			                        </div>
			                        <div class="form-group">
			                        	<label class="sr-only" for="form-email">password</label>
			                        	<input type="text" name="password" placeholder="请输入密码" class="form-email form-control" id="password">
			                        </div>
			                        <div class="form-group">
			                        	<label class="sr-only" for="form-email">password again</label>
			                        	<input type="text" name="password_again" placeholder="请再次输入密码" class="form-email form-control" id="password_again">
			                        </div>
			                         
			                    	 <button type="button" class="btn" id="btn">现在注册！</button>
			                    </form>
		                    </div>
                        </div>
                    </div>
                </div>
            </div>
           
        </div>


        <!-- Javascript -->
        <script src="./studentRegister/assets/js/jquery-1.11.1.min.js"></script>
        <script src="./studentRegister/assets/bootstrap/js/bootstrap.min.js"></script>
        <script src="./studentRegister/assets/js/jquery.backstretch.min.js"></script>
        <script src="./studentRegister/assets/js/retina-1.1.0.min.js"></script>
        <script src="./studentRegister/assets/js/scripts.js"></script>
        
        <!--[if lt IE 10]>
            <script src="./studentRegister/assets/js/placeholder.js"></script>
        <![endif]-->

    </body>

</html>