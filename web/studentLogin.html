<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Bootstrap Login Form Template</title>

        <!-- CSS -->
        
        <!-- <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,100,300,500"> -->
        <link rel="stylesheet" href="./login/assets/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="./login/assets/font-awesome/css/font-awesome.min.css">
		    <link rel="stylesheet" href="./login/assets/css/form-elements.css">
        <link rel="stylesheet" href="./login/assets/css/style.css">
        <link rel="stylesheet" href="./css/biaodan.css">
       
        <link rel="shortcut icon" href="./login/assets/ico/favicon.png">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./login/assets/ico/apple-touch-icon-144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="./login/assets/ico/apple-touch-icon-114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="./login/assets/ico/apple-touch-icon-72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="./login/assets/ico/apple-touch-icon-57-precomposed.png">

    </head>
    <script type="text/javascript" src="./js/jquery.min.js" ></script>
    <script type="text/javascript" src="./js/biaodan.js"></script>
    <script type="text/javascript">
   

    	function teaPage()
    	{
    		window.location.href='teacherLogin.html';
        // alert("dddd");
    	}
 
 	    function isnull_id(val) {

      var str = val.replace(/(^\s*)|(\s*$)/g, '');//去除空格;

      if (str == '' || str == undefined || str == null) 
      {
          //return true;
          alert("学号不能为空");
          console.log('学号不能为空')
          return false;
      } 
      else {
          //return false;
          var length = str.length;
      		if(length == 9 && /^((([0-9]{1})|)+\d{9})$/.test(val) ) 
      		{ 
          		console.log('可以提交');
     				  return true;
      		}
    			else
    			{
    			    alert("格式不正确");
        		  console.log('格式不正确');
              return false;
     			}
        
      }
  	}
  	function isnull_pw(val) {

      var str = val.replace(/(^\s*)|(\s*$)/g, '');//去除空格;

      if (str == '' || str == undefined || str == null) 
      {
          //return true;
          alert("密码不能为空")
          console.log('密码不能为空')
             return false;
      } 
      else {
          
        	console.log('可以提交');
            return true;
    		
  			}
     }




    //回调函数
    function getName(data){
        console.log(data.state);
        
		console.log(JSON.stringify(data));
        //alert("sucess " + JSON.stringify(data));
        if(data.state=="1")
        {
        	console.log("成功！");
        	window.location.href='./plan.html';
          window.localStorage.isLogin = "true";
          window.localStorage.stuId = $("#stuID").val();
          // window.localStorage.password = $("#password").val();
//        alert(window.localStorage.isLogin);
//        plus.storage.setItem("isLogined","true");
        }
        if(data.state=="2")
        {
            alert("密码不正确");
        	console.log("密码不正确");
        	
        }
         if(data.state=="0")
        {
            alert("尚未注册");
        	console.log("尚未注册");
        	
        }
    }

    $(document).ready(function () {

        $("#btn").click(function () {
      var oid = document.getElementById('stuID');
			var opw = document.getElementById('password');
//		console.log('1');
  			var oBtn = document.getElementById('login');
//		console.log('3');
    		if(isnull_id( oid.value )&&isnull_pw( opw.value))
    		{
            //向头部输入一个脚本，该脚本发起一个跨域请求
            $.ajax({
                type: "GET",
                  url: window.localStorage.url + "/studentLogin",
                  data: {callbackFun:"getName",
                  stuId:$("#stuID").val(),
                  password:$("#password").val()
                },
                dataType:"jsonp"  //数据格式设置为jsonp
                //jsonp:"callback"
            });
           }
        });

    });



    </script>
    <style>
        body{
            background-image: url("imgs/backimg2.jpg");
            background-size: 100%;
        }
    </style>

    <body>

        <!-- Top content -->
        <div class="top-content">
        	
            <div class="inner-bg">
                <div class="container">
                    <div class="row">
                        <!--<div class="col-sm-8 col-sm-offset-2 text">-->
                        <!--<div class="col-xs-6" style="height: 50px;">-->
                        <!--<button type="button" name="xuesheng"  style="border-style:none;width: 80%;height: 50px;border-radius: 30px; background-color: cornflowerblue">学生</button>-->
                         <!--<div class="col-xs-6" style="height: 50px;background-color: red;padding: 10px;">-->	
                        <!--</div>-->
                         <!--<div class="col-xs-6" style="height: 50px;">-->
                        <!--<button onclick="teaPage()"style="border-style:none;width: 80%;height: 50px;border-radius: 30px;" >教师</button>-->
                         <!--<div class="col-xs-6" style="height: 50px;background-color: red;padding: 10px;">-->	
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-6 col-sm-offset-3 form-box">
                        	<div class="form-top">
                        		<div class="form-top-left">
                        			<h3>同学您好</h3>
                            		<p>欢迎来到大工软件学院</p>
                        		</div>
                        		<div class="form-top-right">

                        		</div>
                            </div>
                            <div class="form-bottom">
			                    <form role="form" action="" method="post" class="login-form">
			                    	<div class="form-group">
			                    		<!--<label class="sr-only" for="form-username">请输入学号</label>-->
			                        	<input type="text" id="stuID" name="stuId" placeholder="请输入学号" class="form-username form-control control-label vg" id="form-username">
			                        </div>
			                        <div class="form-group">
			                        	<!--<label class="sr-only" for="form-password">密码</label>-->
			                        	<input type="password" id="password" name="password" placeholder="密码" class="form-password form-control" id="form-password">
			                        </div>
			                        <button type="button" id="btn"  class="btn"  >登录</button>
			                     
			                    </form>
			                    <div style="text-align: right;"><a href="./studentRegister.html">现在注册</a></div>
		                    </div>
                        </div>
                    </div>
                    
                </div>
            </div>
            
        </div>
        <!--<div class="copyrights">Collect from <a href="http://www.cssmoban.com/"  title="网站模板">网站模板</a></div>-->


        <!-- Javascript -->
        <script src="./login/assets/js/jquery-1.11.1.min.js"></script>
        <script src="./login/assets/bootstrap/js/bootstrap.min.js"></script>
        <script src="./login/assets/js/jquery.backstretch.min.js"></script>
        <script src="./login/assets/js/scripts.js"></script>
        
        <!--[if lt IE 10]>
            <script src="./login/assets/js/placeholder.js"></script>
        <![endif]-->
        <script type="text/javascript">
          $("#stuID").attr("value",window.localStorage.stuId);
          $("#password").attr("value",window.localStorage.password);
        </script>

    </body>

</html>